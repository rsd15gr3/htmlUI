<!DOCTYPE html>
<html>
    <head lang="en">
        <meta charset="UTF-8">
        <title>RSD Control System | Group 3</title>

        <!-- CSS Styles -->
        <link rel="stylesheet" type="text/css" media="all" title="Style sheet" href="style_main.css" />     <!-- Manually written cool stuff -->
        <link rel="stylesheet" type="text/css" media="all" title="Style sheet" href="style_gen.css" />      <!-- Auto-generated fancy stuff -->

        <!-- Scripts -->
        <script type="text/javascript" src="http://cdn.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
        <script type="text/javascript" src="http://cdn.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
        <script src="jquery-1.11.3.js"></script>
        <script src="script.js"></script>
        <script src="virtualjoystick.js"></script>
        <script type="text/javascript">
            /* ---------------- Define global variables --------------------- */
            var joystick;
            var ip_frobit;
            var ip_workcell;

            // ROS cores
            var ros_frobit;
            var ros_workcell;

            // Topics on Frobit
            var ui_mr_str_control_topic;
            var cmd_vel_topic;
            var control_mode_frobit_topic;
            var mr_usbcam_topic;

            // Topics on Workcell
            var wc_usbcam_topic;

            // Monitoring ros structures
            var topics_client_frobit;
            var topics_client_workcell;
            var nodes_client_frobit;
            var nodes_client_workcell;

            init_ros();

        </script>
    </head>
    <body onload="on_loaded_page()">
        <div id="header" data-role="header" data-position="fixed">
            RSD Control System
        </div>
        <div id="ui_frame">
            <div id="main_control_line">
                <div class="onoffswitch">
                    <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="onoff_mes" disabled>
                    <label class="onoffswitch-label" for="onoff_mes">
                        <span id="inner_onoff_mes" class="onoffswitch-inner"></span>
                        <span class="onoffswitch-switch"></span>
                    </label>
                </div>
                <div class="onoffswitch">
                    <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="onoff_frobit" disabled>
                    <label class="onoffswitch-label" for="onoff_frobit">
                        <span id="inner_onoff_frobit" class="onoffswitch-inner"></span>
                        <span class="onoffswitch-switch"></span>
                    </label>
                </div>
                <div class="onoffswitch">
                    <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="onoff_workcell" disabled>
                    <label class="onoffswitch-label" for="onoff_workcell">
                        <span id="inner_onoff_workcell" class="onoffswitch-inner"></span>
                        <span class="onoffswitch-switch"></span>
                    </label>
                </div>
            </div>
            <div id="tabs_frame">
                <input id="input_tab1" type="radio" name="tabs" class="tabs_inputs" onclick="tabs_clicked();" checked>
                <label for="input_tab1" class="tabs_labels">Frobit</label>
                <input id="input_tab2" type="radio" name="tabs" class="tabs_inputs" onclick="tabs_clicked();">
                <label for="input_tab2" class="tabs_labels">Workcell</label>
                <input id="input_tab3" type="radio" name="tabs" class="tabs_inputs" onclick="tabs_clicked();">
                <label for="input_tab3" class="tabs_labels">Tipper</label>
                <input id="input_tab4" type="radio" name="tabs" class="tabs_inputs" onclick="tabs_clicked();">
                <label for="input_tab4" class="tabs_labels">Belt</label>
                <input id="input_tab5" type="radio" name="tabs" class="tabs_inputs" onclick="tabs_clicked();">
                <label for="input_tab5" class="tabs_labels">Cameras</label>
                <input id="input_tab6" type="radio" name="tabs" class="tabs_inputs" onclick="tabs_clicked();">
                <label for="input_tab6" class="tabs_labels">ROS</label>

                <section id="tabs_content1"  class="tabs_sections">
                    <div id="mr_manual_control_frame" tabindex="0">
                         <div class="automanualswitch">
                            <input type="checkbox" name="automanualswitch" class="automanualswitch-checkbox" id="mr_man_auto_switch" onclick="mr_man_auto_changed();">
                            <label class="automanualswitch-label" for="mr_man_auto_switch">
                                <span class="automanualswitch-inner"></span>
                                <span class="automanualswitch-switch"></span>
                            </label>
                        </div>
                        <div id="fake_joystick">
                            <!-- This is just to keep this position, real joystick_container below -->
                        </div>
                    </div>

                    <div id="mr_monitor_frame">
                        <div id="mr_monitor_frame_header">
                            Frobit Online Monitor
                        </div>
                        <table id="mr_monitor_frame_table">
                            <tr>
                                <td class="monitor_frame_content_td1">Connection:</td>
                                <td class="monitor_frame_content_td2" id="mr_net_ip"></td>
                            </tr>
                            <tr>
                                <td class="monitor_frame_content_td1">Control Mode [auto/man]:</td>
                                <td class="monitor_frame_content_td2" id="mr_monitor_cell_mode"></td>
                            </tr>
                            <tr>
                                <td class="monitor_frame_content_td1">State (mission):</td>
                                <td class="monitor_frame_content_td2" id="mr_monitor_state"></td>
                            </tr>
                            <tr>
                                <td class="monitor_frame_content_td1">Position On Map:</td>
                                <td class="monitor_frame_content_td2" id="mr_monitor_position"></td>
                            </tr>
                            <tr>
                                <td class="monitor_frame_content_td1">Linear velocity:</td>
                                <td class="monitor_frame_content_td2" id="mr_monitor_cell_lin_vel"></td>
                            </tr>
                            <tr>
                                <td class="monitor_frame_content_td1">Angular velocity:</td>
                                <td class="monitor_frame_content_td2" id="mr_monitor_cell_ang_vel"></td>
                            </tr>
                        </table>
                    </div>
                </section>

                <section id="tabs_content2"  class="tabs_sections">
                    <div id="wc_manual_control_frame">
                        <div class="automanualswitch">
                            <input type="checkbox" name="automanualswitch" class="automanualswitch-checkbox" id="wc_man_auto_switch" onclick="wc_man_auto_changed();">
                            <label class="automanualswitch-label" for="wc_man_auto_switch">
                                <span class="automanualswitch-inner"></span>
                                <span class="automanualswitch-switch"></span>
                            </label>
                        </div>
                        <table id="wc_mc_table" cellspacing="5">
                            <tr>
                                <th>
                                    j0
                                </th>
                                <td>
                                    <input class="wc_mc_table_button" type="button" value="-"/>
                                </td>
                                <td class="wc_mc_table_value">
                                    ?.?
                                </td>
                                <td>
                                    <input id="wc_mc_slider_j0"  class="wc_mc_table_slider" type="range" step="0.1" onchange="wc_mc_changed(this, this.value)" disabled />
                                </td>
                                <td class="wc_mc_table_value">
                                    ?.?
                                </td>
                                <td>
                                    <input class="wc_mc_table_button" type="button" value="+"/>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    j1
                                </th>
                                <td>
                                    <input class="wc_mc_table_button" type="button" value="-"/>
                                </td>
                                <td class="wc_mc_table_value">
                                    ?.?
                                </td>
                                <td>
                                    <input id="wc_mc_slider_j1"  class="wc_mc_table_slider" type="range" step="0.1" onchange="wc_mc_changed(this, this.value)" disabled />
                                </td>
                                <td class="wc_mc_table_value">
                                    ?.?
                                </td>
                                <td>
                                    <input class="wc_mc_table_button" type="button" value="+"/>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    j2
                                </th>
                                <td>
                                    <input class="wc_mc_table_button" type="button" value="-"/>
                                </td>
                                <td class="wc_mc_table_value">
                                    ?.?
                                </td>
                                <td>
                                    <input id="wc_mc_slider_j2"  class="wc_mc_table_slider" type="range" step="0.1" onchange="wc_mc_changed(this, this.value)" disabled />
                                </td>
                                <td class="wc_mc_table_value">
                                    ?.?
                                </td>
                                <td>
                                    <input class="wc_mc_table_button" type="button" value="+"/>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    j3
                                </th>
                                <td>
                                    <input class="wc_mc_table_button" type="button" value="-"/>
                                </td>
                                <td class="wc_mc_table_value">
                                    ?.?
                                </td>
                                <td>
                                    <input id="wc_mc_slider_j3"  class="wc_mc_table_slider" type="range" step="0.1" onchange="wc_mc_changed(this, this.value)" disabled />
                                </td>
                                <td class="wc_mc_table_value">
                                    ?.?
                                </td>
                                <td>
                                    <input class="wc_mc_table_button" type="button" value="+"/>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    j4
                                </th>
                                <td>
                                    <input class="wc_mc_table_button" type="button" value="-"/>
                                </td>
                                <td class="wc_mc_table_value">
                                    ?.?
                                </td>
                                <td>
                                    <input id="wc_mc_slider_j4"  class="wc_mc_table_slider" type="range" step="0.1" onchange="wc_mc_changed(this, this.value)" disabled />
                                </td>
                                <td class="wc_mc_table_value">
                                    ?.?
                                </td>
                                <td>
                                    <input class="wc_mc_table_button" type="button" value="+"/>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    j5
                                </th>
                                <td>
                                    <input class="wc_mc_table_button" type="button" value="-"/>
                                </td>
                                <td class="wc_mc_table_value">
                                    ?.?
                                </td>
                                <td>
                                    <input id="wc_mc_slider_j5"  class="wc_mc_table_slider" type="range" step="0.1" onchange="wc_mc_changed(this, this.value)" disabled />
                                </td>
                                <td class="wc_mc_table_value">
                                    ?.?
                                </td>
                                <td>
                                    <input class="wc_mc_table_button" type="button" value="+"/>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    G
                                </th>
                                <td>
                                    <input class="wc_mc_table_button" type="button" value="-"/>
                                </td>
                                <td class="wc_mc_table_value">
                                    ?.?
                                </td>
                                <td>
                                    <input id="wc_mc_slider_g"  class="wc_mc_table_slider" type="range" step="0.1" onchange="wc_mc_changed(this, this.value)" disabled />
                                </td>
                                <td class="wc_mc_table_value">
                                    ?.?
                                </td>
                                <td>
                                    <input class="wc_mc_table_button" type="button" value="+"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div id="wc_monitor_frame">
                        <div id="wc_monitor_frame_header">
                            Workcell Online Monitor
                        </div>
                        <table id="wc_monitor_frame_table">
                            <tr>
                                <td class="monitor_frame_content_td1">Connection:</td>
                                <td class="monitor_frame_content_td2" id="wc_net_ip"></td>
                            </tr>
                            <tr>
                                <td class="monitor_frame_content_td1">Control Mode [auto/man]:</td>
                                <td class="monitor_frame_content_td2" id="wc_monitor_cell_mode"></td>
                            </tr>
                            <tr>
                                <td class="monitor_frame_content_td1">State (mission):</td>
                                <td class="monitor_frame_content_td2" id="wc_monitor_cell_mission"></td>
                            </tr>
                            <tr>
                                <td class="monitor_frame_content_td1">Joint 0:</td>
                                <td class="monitor_frame_content_td2" id="wc_monitor_cell_j0"></td>
                            </tr>
                            <tr>
                                <td class="monitor_frame_content_td1">Joint 1:</td>
                                <td class="monitor_frame_content_td2" id="wc_monitor_cell_j1"></td>
                            </tr>
                            <tr>
                                <td class="monitor_frame_content_td1">Joint 2:</td>
                                <td class="monitor_frame_content_td2" id="wc_monitor_cell_j2"></td>
                            </tr>
                            <tr>
                                <td class="monitor_frame_content_td1">Joint 3:</td>
                                <td class="monitor_frame_content_td2" id="wc_monitor_cell_j3"></td>
                            </tr>
                            <tr>
                                <td class="monitor_frame_content_td1">Joint 4:</td>
                                <td class="monitor_frame_content_td2" id="wc_monitor_cell_j4"></td>
                            </tr>
                            <tr>
                                <td class="monitor_frame_content_td1">Joint 5:</td>
                                <td class="monitor_frame_content_td2" id="wc_monitor_cell_j5"></td>
                            </tr>
                            <tr>
                                <td class="monitor_frame_content_td1">Gripper:</td>
                                <td class="monitor_frame_content_td2" id="wc_monitor_cell_gripper"></td>
                            </tr>
                        </table>
                    </div>
                </section>

                <section id="tabs_content3"  class="tabs_sections">
                    tipper
                </section>

                <section id="tabs_content4"  class="tabs_sections">
                    belt
                </section>

                <section id="tabs_content5"  class="tabs_sections">
                    <table id="cameras_table" cellspacing="5">
                        <tr>
                            <th>Frobit's USB Camera</th>

                            <th>Workcell's USB Camera</th>
                        </tr>
                        <tr>
                            <td>
                                <img id="mr_monitor_usbcam_img" alt="Camera node on Frobit is not ready"/>
                            </td>
                            <td>
                                <img id="wc_monitor_usbcam_img" alt="Camera node on Workcell is not ready"/>
                            </td>
                        </tr>
                    </table>
                </section>

                <section id="tabs_content6"  class="tabs_sections">
                    <table id="ros_structure_table" cellspacing="5" cellpadding="5">
                        <tr>
                            <th>Frobit's Topics</th>

                            <th>Workcell's Topics</th>
                        </tr>
                        <tr>
                            <td id="mr_ros_structure_topics">
                                &nbsp;
                            </td>
                            <td id="wc_ros_structure_topics">
                                &nbsp;
                            </td>
                        </tr>
                        <tr>
                            <th>Frobit's Active Nodes</th>

                            <th>Workcell's Active Nodes</th>
                        </tr>
                        <tr>
                            <td id="mr_ros_structure_nodes">
                                &nbsp;
                            </td>
                            <td id="wc_ros_structure_nodes">
                                &nbsp;
                            </td>
                        </tr>
                    </table>
                </section>
            </div>
            <div id="console_frame">
                <textarea id="textarea_console" rows="4" cols="95">
                </textarea>
            </div>
        </div>
        <!-- The joystick needs to be relative to the body (page), as it reads mouse/touch positions on page -->
        <div id="joystick_container">
            <canvas id="joystick_base"></canvas>
            <canvas id="joystick_stick"></canvas>
        </div>
    </body>
</html>